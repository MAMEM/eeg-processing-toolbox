<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of DWT</title>
  <meta name="keywords" content="DWT">
  <meta name="description" content="">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../index.html">Home</a> &gt;  <a href="#">+eegtoolkit</a> &gt; <a href="#">+featextraction</a> &gt; <a href="index.html">@DWT</a> &gt; DWT.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../index.html"><img alt="<" border="0" src="../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for +eegtoolkit/+featextraction/@DWT&nbsp;<img alt=">" border="0" src="../../../right.png"></a></td></tr></table>-->

<h1>DWT
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong></strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>This is a script file. </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="DWT.html" class="code" title="">DWT</a>	</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="DWT.html" class="code" title="">DWT</a>	</li></ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function mDWT = DWT(trials, seconds, channel,levWT,WavFam)</a></li><li><a href="#_sub2" class="code">function extract(mDWT)</a></li><li><a href="#_sub3" class="code">function configInfo = getConfigInfo(mDWT)</a></li><li><a href="#_sub4" class="code">function time = getTime(mDWT)</a></li></ul>
<h2><a name="_download"></a>DOWNLOAD <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<p><a href="DWT.m">DWT.m</a></p>
<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 classdef <a href="DWT.html" class="code" title="">DWT</a> &lt; eegtoolkit.featextraction.FeatureExtractionBase
0002     
0003     properties (Access = public)
0004         channel;
0005         seconds;
0006         levelWT;
0007         WavFamily;
0008         avgTime;
0009     <span class="keyword">end</span>
0010     
0011     methods (Access = public)
0012         <a name="_sub0" href="#_subfunctions" class="code">function mDWT = DWT(trials, seconds, channel,levWT,WavFam)</a>
0013             <span class="keyword">if</span> nargin == 0
0014                 mDWT.seconds = 0;
0015                 mDWT.channel = 1;
0016                 mDWT.levelWT = 5;
0017                 mDWT.WavFamily = <span class="string">'db1'</span>;
0018             <span class="keyword">elseif</span> nargin == 1
0019                 mDWT.trials = trials;
0020                 mDWT.seconds = 0;
0021                 mDWT.channel = 1;
0022                 mDWT.levelWT = 5;
0023                 mDWT.WavFamily = <span class="string">'db1'</span>;
0024             <span class="keyword">elseif</span> nargin == 2
0025                 mDWT.trials = trials;
0026                 mDWT.channel = 1;
0027                 mDWT.seconds = seconds;
0028                 mDWT.levelWT = 5;
0029                 mDWT.WavFamily = <span class="string">'db1'</span>;
0030             <span class="keyword">elseif</span> nargin == 3
0031                 mDWT.trials = trials;
0032                 mDWT.channel = channel;
0033                 mDWT.seconds = seconds;
0034                 mDWT.levelWT = 5;
0035                 mDWT.WavFamily = <span class="string">'db1'</span>;
0036             <span class="keyword">elseif</span> nargin == 4
0037                 mDWT.trials = trials;
0038                 mDWT.channel = channel;
0039                 mDWT.seconds = seconds;
0040                 mDWT.levelWT = levWT;
0041                 mDWT.WavFamily = <span class="string">'db1'</span>;
0042             <span class="keyword">elseif</span> nargin ==5
0043                 mDWT.trials = trials;
0044                 mDWT.channel = channel;
0045                 mDWT.seconds = seconds;
0046                 mDWT.levelWT = levWT;
0047                 mDWT.WavFamily = WavFam;
0048             <span class="keyword">else</span>
0049                 error(<span class="string">'invalid number of arguments'</span>);
0050             <span class="keyword">end</span>
0051             mDWT.avgTime = 0;
0052         <span class="keyword">end</span>
0053         
0054         <a name="_sub1" href="#_subfunctions" class="code">function extract(mDWT)</a>
0055             <span class="keyword">if</span> length(mDWT.seconds)==1
0056                 numsamples = mDWT.trials{1}.samplingRate * mDWT.seconds;
0057                 <span class="keyword">if</span> (numsamples == 0)
0058                     numsamples = size(mDWT.trials{1}.signal(mDWT.channel,:),2);
0059                 <span class="keyword">end</span>
0060                 numTrials = length(mDWT.trials);
0061                 
0062                 [C L] = wavedec(mDWT.trials{1}.signal(mDWT.channel, 1:numsamples),mDWT.levelWT,mDWT.WavFamily);
0063                 instances = zeros(numTrials, length(C));
0064                 labels = zeros(numTrials,1);
0065             <span class="keyword">elseif</span> length(mDWT.seconds) == 2
0066                 sampleA = mDWT.trials{1}.samplingRate * mDWT.seconds(1) + 1;
0067                 sampleB = mDWT.trials{1}.samplingRate * mDWT.seconds(2);
0068                 numTrials = length(mDWT.trials);
0069                 [C L] = wavedec(mDWT.trials{1}.signal(mDWT.channel, sampleA:sampleB),mDWT.levelWT,mDWT.WavFamily);
0070                 instances = zeros(numTrials, length(C));
0071                 labels = zeros(numTrials,1);
0072             <span class="keyword">else</span>
0073                 error(<span class="string">'invalid seconds parameter'</span>);
0074             <span class="keyword">end</span>
0075             tic
0076             <span class="keyword">for</span> i=1:numTrials
0077                 <span class="keyword">if</span> length(mDWT.seconds) == 1
0078                     numsamples = mDWT.trials{i}.samplingRate * mDWT.seconds;
0079                     <span class="keyword">if</span>(numsamples == 0)
0080                         y = mDWT.trials{i}.signal(mDWT.channel,:);
0081                     <span class="keyword">else</span>
0082                         y = mDWT.trials{i}.signal(mDWT.channel, 1:numsamples);
0083                     <span class="keyword">end</span>
0084                     <span class="comment">% zero padding to nearest power of 2</span>
0085                     <span class="keyword">if</span> isa(mDWT.filter,<span class="string">'dfilt.df2sos'</span>)
0086                         y = filter(mDWT.filter,y);
0087                     <span class="keyword">elseif</span> isa(mDWT.filter,<span class="string">'dfilt.dffir'</span>)
0088                         y = filtfilt(mDWT.filter.Numerator,1,y);
0089                     <span class="keyword">end</span>
0090                     [C L] = wavedec(y,mDWT.levelWT,mDWT.WavFamily);<span class="comment">%pwelch(y,[],[],512,mDWT.trials{i}.samplingRate,'onesided');</span>
0091                 <span class="keyword">elseif</span> length(mDWT.seconds) == 2
0092                     sampleA = mDWT.trials{i}.samplingRate * mDWT.seconds(1) + 1;
0093                     sampleB = mDWT.trials{i}.samplingRate * mDWT.seconds(2);
0094                     y = mDWT.trials{i}.signal(mDWT.channel,sampleA:sampleB);
0095                     <span class="keyword">if</span> isa(mDWT.filter,<span class="string">'dfilt.df2sos'</span>) || isa(mDWT.filter,<span class="string">'dfilt.df2'</span>)
0096                         y = filter(mDWT.filter,y);
0097                     <span class="keyword">elseif</span> isa(mDWT.filter,<span class="string">'dfilt.dffir'</span>)
0098                         y = filtfilt(mDWT.filter.Numerator,1,y);
0099                     <span class="keyword">end</span>
0100                     [C L] = wavedec(y,mDWT.levelWT,mDWT.WavFamily);<span class="comment">%pwelch(y,[],[],512,mDWT.trials{i}.samplingRate,'onesided');</span>
0101                 <span class="keyword">else</span>
0102                     error(<span class="string">'invalid seconds parameter'</span>);
0103                 <span class="keyword">end</span>
0104                 instances(i,:) = C;
0105                 labels(i,1) = floor(mDWT.trials{i}.label);
0106             <span class="keyword">end</span>
0107             mDWT.avgTime = toc/numTrials;
0108             mDWT.instanceSet = eegtoolkit.util.InstanceSet(instances,labels);
0109         <span class="keyword">end</span>
0110         
0111         <a name="_sub2" href="#_subfunctions" class="code">function configInfo = getConfigInfo(mDWT)</a>
0112             configInfo = sprintf(<span class="string">'DWT\tchannel:%d\tseconds:%d\tlevelWT:%d\tWavFamily:%s'</span>,mDWT.channel,mDWT.seconds,mDWT.levelWT,mDWT.WavFamily);
0113         <span class="keyword">end</span>
0114         
0115                         
0116         <a name="_sub3" href="#_subfunctions" class="code">function time = getTime(mDWT)</a>
0117             time = mDWT.avgTime;
0118         <span class="keyword">end</span>
0119     <span class="keyword">end</span>
0120     
0121 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Fri 25-Nov-2016 17:12:22 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>